<!doctype html>
<html>

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta http-equiv="Content-Security-Policy"
        content="default-src 'self'; script-src 'self' https://cdn.jsdelivr.net; img-src 'self' https: data: file:; media-src 'self' blob: http: https:; connect-src 'self' http: https:; style-src 'self' 'unsafe-inline'; worker-src 'self' blob:;" />
    <title>Sama Live</title>
    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <div id="app">
        <aside id="sidebar">
            <div id="sidebar-top">
                <input id="search" placeholder="Search channels..." />
                <div class="sidebar-top-actions">
                    <button id="refreshBtn">Refresh</button>
                    <button id="settingsBtn">Settings</button>
                </div>
            </div>
            <div id="favorites" class="section">
                <div class="favorites-header">
                    <h3 class="section-header">
                        <span class="section-toggle">‚ñº</span>
                        ‚≠ê Favorites
                    </h3>
                    <button id="sidebarToggle" class="sidebar-toggle" title="Toggle Sidebar">&lt;</button>
                </div>
            </div>

            <div id="sidebar-scroll">
                <ul id="favorites-list" class="channel-list"></ul>

                <div id="channels" class="section">
                    <div class="channels-header">
                        <h3>Channels</h3>
                    </div>
                    <div id="channels-loading" class="channels-loading hidden">
                        <div class="spinner-small">Loading....</div>
                    </div>
                    <div id="channel-groups"></div>
                </div>
            </div>
        </aside>

        <main id="main">
            <div id="topbar">
                <button id="playBtn">Play</button>
                <button id="pauseBtn">Pause</button>
                <button id="stopBtn">Stop</button>
                <div id="volumeControlNav" class="volume-control-nav">
                    <button id="volumeBtnNav" class="volume-btn-nav" title="Volume">üîä</button>
                    <div id="volumePanelNav" class="volume-panel-nav hidden">
                        <input id="volumeSliderNav" type="range" min="0" max="100" class="volume-slider-nav" />
                    </div>
                </div>
                <div id="nowplaying"></div>
                <select id="qualitySelect">
                    <option value="auto">Auto Quality</option>
                    <option value="1080p">1080p</option>
                    <option value="720p">720p</option>
                    <option value="480p">480p</option>
                    <option value="360p">360p</option>
                </select>
                <button id="themeBtn" title="Toggle Theme">üåô</button>
                <button id="aboutBtn" title="About">‚ÑπÔ∏è</button>
            </div>

            <div id="player-area">
                <div id="overlay-spinner" class="hidden">Loading...</div>
                <div id="buffering-indicator" class="hidden">
                    <div id="buffering-title">Buffering‚Ä¶</div>
                    <div id="buffering-subtitle"></div>
                    <div id="buffering-progress">
                        <div id="buffering-progress-fill"></div>
                    </div>
                </div>
                <div id="player-welcome" class="player-welcome">
                    <div class="welcome-content">
                        <h2>üëã Welcome to Sama Live</h2>
                        <p>Select a channel from the sidebar to start watching</p><img src="../../assets/icon.ico" alt="Sama Live Logo" style="width: 120px; height: 120px; margin-top: 20px; border-radius: 12px;">
                    </div>
                </div>
                <video id="video" controls playsinline></video>
                <div id="player-message" class="message"></div>

                <!-- Custom Volume Control for Tablet -->
                <div id="volumeControl" class="volume-control hidden">
                    <button id="volumeBtn" class="volume-btn" title="Mute/Unmute">üîä</button>
                    <div id="volumePanel" class="volume-panel hidden">
                        <button id="volumeDownBtn" class="volume-adjust-btn" title="Volume Down">‚àí</button>
                        <input id="volumeSlider" type="range" min="0" max="100" class="volume-slider" />
                        <button id="volumeUpBtn" class="volume-adjust-btn" title="Volume Up">+</button>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- How to Get Started modal -->
    <div id="howToStart" class="modal hidden">
        <div class="modal-content">
            <h2>Welcome to Sama Live!</h2>
            <div style="max-height: 400px; overflow-y: auto;">
                <h3>Getting Started in 3 Steps:</h3>
                <ol style="line-height: 1.8; font-size: 14px;">
                    <li>
                        <strong>Get a Playlist URL:</strong>
                        <p>You need an M3U/M3U8 playlist file. You can:</p>
                        <ul>
                            <li>Use the "Load Default" button in Settings for a pre-configured list</li>
                            <li>Enter your own playlist URL (IPTV provider, M3U8 link, etc.)</li>
                            <li>Import a local M3U/M3U8 file using "Import Playlist File"</li>
                        </ul>
                    </li>
                    <li>
                        <strong>Load the Playlist:</strong>
                        <p>Click "Settings" ‚Üí enter or select a playlist URL ‚Üí click "Load Playlist" to see channels</p>
                    </li>
                    <li>
                        <strong>Start Watching:</strong>
                        <p>Click any channel to play it. Use Play/Pause/Stop buttons to control playback. Adjust quality
                            with the dropdown.</p>
                    </li>
                </ol>
                <h3>Pro Tips:</h3>
                <ul style="font-size: 14px; line-height: 1.6;">
                    <li>‚≠ê Click the star icon to add channels to Favorites</li>
                    <li>üîç Use Search to quickly find channels</li>
                    <li>‚öôÔ∏è Enable "Auto reconnect" in Settings for automatic recovery on connection loss</li>
                    <li>üìä Enable "Low bandwidth mode" if you have slower internet</li>
                    <li>üåô Click the moon icon in the top right to toggle dark/light mode</li>
                </ul>
            </div>
            <button id="startWatching" style="width: 100%; margin-top: 16px;">Start Watching</button>
        </div>
    </div>

    <!-- Disclaimer modal -->
    <div id="disclaimer" class="modal hidden">
        <div class="modal-content">
            <h2>Disclaimer</h2>
            <p>This app does not bundle any playlists. Please provide your own M3U/M3U8 playlist URL. Streaming may use
                your internet connection.</p>
            <button id="dismissDisclaimer">I understand</button>
        </div>
    </div>

    <!-- Settings modal -->
    <div id="settings" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><span class="about-icon">‚öôÔ∏è</span> Settings</h2>
                <button id="closeSettings" class="modal-close-btn" title="Close">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="playlist-row">
                    <div class="form-group playlist-col-select">
                        <label>Playlist Selection</label>
                        <select id="playlistSelect" class="form-control">
                            <option value="">Custom URL</option>
                            <option value="IPTV">IPTV</option>
                            <option value="XUMO">XUMO</option>
                        </select>
                    </div>
                    <div class="form-group playlist-col-url">
                        <label>Playlist URL</label>
                        <div class="input-group">
                            <input id="playlistUrl" type="text" class="form-control" placeholder="https://example.com/playlist.m3u8" />
                        </div>
                    </div>
                </div>

                <div class="playlist-row">
                    <div class="form-group playlist-col-select">
                        <label>Playlist Selection 2</label>
                        <select id="playlistSelect2" class="form-control">
                            <option value="">None</option>
                            <option value="IPTV">IPTV</option>
                            <option value="XUMO">XUMO</option>
                        </select>
                    </div>
                    <div class="form-group playlist-col-url">
                        <label>Playlist URL 2 (optional)</label>
                        <div class="input-group">
                            <input id="playlistUrl2" type="text" class="form-control" placeholder="https://example.com/playlist2.m3u8" />
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <button id="loadSelectedPlaylist" class="btn-primary" title="Load selected playlist(s)" style="width: 100%;">
                        <span class="btn-loading-spinner" aria-hidden="true"></span>
                        <span class="btn-label">Load Selected</span>
                    </button>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-container">
                        <input type="checkbox" id="lowBandwidth">
                        <span class="checkmark"></span>
                        Low bandwidth mode (prefer SD)
                    </label>
                </div>
                
                <div class="form-group">
                    <label class="checkbox-container">
                        <input type="checkbox" id="autoReconnect">
                        <span class="checkmark"></span>
                        Auto reconnect
                    </label>
                </div>
                
                <div class="form-group">
                    <label for="bufferSize">Buffer (seconds)</label>
                    <input id="bufferSize" type="number" min="5" max="60" class="form-control" />
                </div>
                
                <div class="button-group">
                    <button id="clearCache" class="btn-primary">Clear Cache</button>
                    <button id="importFile" class="btn-primary">Import Playlist File</button>
                    <button id="saveSettings" class="btn-primary">Save Settings</button>
                </div>
                
                <div class="load-progress-container hidden">
                    <div class="load-progress-bar"></div>
                </div>
                
                <div class="modal-footer"></div>
            </div>
        </div>
    </div>

    <!-- About modal -->
    <div id="about" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h2><span class="about-icon">üì∫</span> Sama Live</h2>
                <button id="closeAboutX" class="modal-close-btn" title="Close">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="about-app-title">
                    <img src="../../assets/icon.ico" alt="Sama Live" class="about-app-icon" id="appLogo">
                    <h2>Sama Live</h2>
                    <p>Stream your favorite live TV channels with a sleek and modern interface</p>
                    <div class="about-version">v<span id="appVersion">0.1.0</span></div>
                </div>

                <div class="about-section">
                    <h3>App Information</h3>
                    <p>Sama Live is a lightweight and fast application for streaming live TV channels from M3U/M3U8 playlists. Enjoy a seamless viewing experience with a clean, modern interface.</p>
                    
                    <div class="about-grid">
                        <div class="about-feature">
                            <h4><span class="about-icon">‚ö°</span> Lightning Fast</h4>
                            <p>Optimized for performance with minimal resource usage</p>
                        </div>
                        <div class="about-feature">
                            <h4><span class="about-icon">üé®</span> Beautiful UI</h4>
                            <p>Clean, modern interface with dark/light theme support</p>
                        </div>
                        <div class="about-feature">
                            <h4><span class="about-icon">üîí</span> Private</h4>
                            <p>Your playlists stay on your device, no data collection</p>
                        </div>
                        <div class="about-feature">
                            <h4><span class="about-icon">üîå</span> No Plugins</h4>
                            <p>Built with web technologies, no additional plugins needed</p>
                        </div>
                    </div>
                </div>

                <div class="about-section">
                    <h3>Features</h3>
                    <ul style="padding-left: 20px; margin: 0;">
                        <li>Support for M3U/M3U8 playlists</li>
                        <li>Channel favorites and search functionality</li>
                        <li>Adjustable video quality settings</li>
                        <li>Dark/Light theme support</li>
                        <li>Low bandwidth mode for slower connections</li>
                        <li>Auto-reconnect for uninterrupted streaming</li>
                    </ul>
                </div>

                <div class="about-section">
                    <h3>How to Use</h3>
                    <ol style="padding-left: 20px; margin: 0;">
                        <li>Go to Settings and add your M3U/M3U8 playlist URL</li>
                        <li>Click on any channel to start streaming</li>
                        <li>Use the controls to adjust volume, quality, and more</li>
                        <li>Click the star icon to add channels to Favorites</li>
                    </ol>
                </div>

                <div class="about-section">
                    <h3>Support</h3>
                    <p>For issues or feature requests, please contact support.</p>
                </div>

                <div class="about-footer">
                    <div class="about-version">v<span id="appVersion">0.3.4</span></div>
                    <div class="about-links">
                        <button id="checkForUpdates" class="about-link">
                            <span class="about-icon">üîÑ</span> Check for Updates
                            <span id="updateStatus" style="margin-left: 8px; font-size: 0.9em; color: var(--text-tertiary);"></span>
                        </button>
                        <button id="showLicenses" class="about-link">
                            <span class="about-icon">üìú</span> Licenses
                        </button>
                    </div>
                </div>
            </div>
            <div id="devToolsSection" class="dev-tools-section">
                <h3 class="dev-tools-title">Developer Tools</h3>
                <button id="openDevToolsBtn" class="dev-tools-btn">
                    <span class="btn-icon">üõ†Ô∏è</span>
                    <span>Open Developer Console</span>
                </button>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest/dist/hls.min.js"></script>
    
    <!-- License Modal -->
    <!-- Confirmation Modal -->
    <div id="confirmationModal" class="modal hidden">
        <div class="modal-content" style="max-width: 450px;">
            <div class="modal-header">
                <h2><span class="about-icon">‚ö†Ô∏è</span> Confirm Action</h2>
                <button id="closeConfirmationModal" class="modal-close-btn" title="Close">‚úï</button>
            </div>
            <div class="modal-body">
                <p id="confirmationMessage">Are you sure you want to perform this action?</p>
                <div class="confirmation-buttons" style="display: flex; justify-content: flex-end; gap: 12px; margin-top: 24px;">
                    <button id="cancelConfirm" class="btn btn-secondary" style="min-width: 80px;">Cancel</button>
                    <button id="confirmAction" class="btn btn-danger" style="min-width: 80px;">Confirm</button>
                </div>
            </div>
        </div>
    </div>

    <div id="licenseModal" class="modal">
        <div class="modal-content" style="max-width: 700px; max-height: 80vh;">
            <div class="modal-header">
                <h2><span class="about-icon">üìú</span> License</h2>
                <button id="closeLicenseModal" class="modal-close-btn" title="Close">‚úï</button>
            </div>
            <div class="modal-body" style="padding: 20px; overflow-y: auto;">
                <div class="license-content" style="white-space: pre-line; line-height: 1.6; font-family: monospace; font-size: 14px;">
PROPRIETARY LICENSE

Copyright (c) 2025 Matarr Sama (Streamio Developer)

All rights reserved.

RESTRICTIONS ON USE:

1. MODIFICATION: No part of this software may be modified, adapted, or altered without explicit written permission from the developer (Matarr Sama).

2. FORKING: Creating a fork, derivative work, or copy of this repository is strictly prohibited without prior written permission from the developer.

3. DISTRIBUTION: Redistribution of this software or any modified version is not permitted without explicit written consent from the developer.

4. PRIVATE USE: You may use this software privately for non-commercial purposes only.

5. COMMERCIAL USE: Any commercial use of this software requires explicit written permission and a separate agreement with the developer.

PERMISSIONS:
To request permission for modification, forking, distribution, or commercial use, contact:
Email: matarrsama@gmail.com

DISCLAIMER:
THIS SOFTWARE IS PROVIDED "AS IS" WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.

By using this software, you agree to comply with all the terms and conditions outlined in this license.
                </div>
                <div class="modal-footer" style="margin-top: 20px; text-align: right;">
                    <button id="closeLicenseBtn" class="btn" style="padding: 8px 16px; background: var(--accent); color: white; border: none; border-radius: 4px; cursor: pointer;">Close</button>
                </div>
            </div>
        </div>
    </div>

    <script src="updateDialog.js"></script>
    <script src="renderer.js"></script>
</body>

</html>
